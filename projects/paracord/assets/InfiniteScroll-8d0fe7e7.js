import{h as x,F as z,_ as Y,p as V,ai as te,aj as Z,ak as ae,af as ie,ae as le,w as R,b as N}from"./index-8e29a41c.js";var oe={},ce=oe,$=function(c,T){return c?Math.floor((c+T)/T)-1:0},ue=function(c){var T=c.children,j=c.items,u=j===void 0?[]:j,y=c.onMore,E=c.renderMarker,f=c.replace,o=c.show,A=c.step,i=A===void 0?50:A,F=x(),H=F[0],ee=F[1],v=z(function(){return Math.max(0,Math.ceil(u.length/i)-1)},[u.length,i]),q=x([0,$(o,i)]),n=q[0],D=q[1],G=x([]),a=G[0],J=G[1],K=x(0),L=K[0],O=K[1],P=Y(),h=Y();V(function(){var t,e=function(){if(t){var S=t[0],m,w;if(S===document)m=document.documentElement.scrollTop||document.body.scrollTop,w=window.innerHeight;else{m=S.scrollTop;var M=S.getBoundingClientRect();w=M.height}for(var b=w/4,s=0,p=0,I=a[p]||0;a[p+1]&&I<m-b;)p+=1,s+=1,I+=a[p];for(var g=s;a[p]!==void 0&&I<m+w+b;)p+=1,g+=1,I+=a[p]||0;if(f||(s=0,g=Math.max(n[1],g)),o){var X=$(o,i);s=Math.min(X,s),g=Math.max(X,g)}(s!==n[0]||g!==n[1])&&D([s,g])}},r,l=function(){clearTimeout(r),r=setTimeout(e,10)};return h.current&&(t=te(h.current),t.forEach(function(d){return d.addEventListener("scroll",l)})),window.addEventListener("resize",l),e(),function(){t&&t.forEach(function(d){return d.removeEventListener("scroll",l)}),window.removeEventListener("resize",l),clearTimeout(r)}},[a,n,f,o,i]),V(function(){y&&n[1]===v&&u.length>=L&&u.length>0&&(O(u.length+1),y())},[u.length,v,y,L,n,i]),V(function(){u.length===0&&v===0&&L!==0&&(J([]),O(0),D([0,$(o,i)]))},[v,L,o,i,u.length]),Z(function(){var t=setTimeout(function(){if(o&&h.current&&o!==H){var e=o-n[0]*i+(n[0]?1:0),r=h.current.parentNode.children.item(e);if(r){var l=ae(r);ie(r,l)?r.scrollIntoView(!0):le(r,l)&&r.scrollIntoView(!1),ee(o)}}},100);return function(){return clearTimeout(t)}},[n,o,i]),Z(function(){if(h.current){var t=h.current.parentNode.children;if((P.current?1:0)+(n[1]-n[0]+1)*i+1===t.length){for(var e,r=n[0],l;r<=n[1];){var d=(P.current?1:0)+(r-n[0])*i,S=Math.min(d+i-1,t.length-1),m=l!==void 0?l:t.item(d).getBoundingClientRect().top,w=t.item(S).getBoundingClientRect(),M=w.bottom,b=M-m;M&&(!a||a[r]!==b)&&(e||(e=[].concat(a||[])),e[r]=b),l=M,r+=1}for(;f&&r<=v;){if(!a[r]&&a[r]!==a[0]){e||(e=[].concat(a||[]));var s=e;e[r]=s[0]}r+=1}e&&J(e)}}},[v,a,n,f,i]);var Q=z(function(){if(!f)return 0;for(var t=0,e=0;e<n[0];)t+=a[e]||0,e+=1;return t},[a,n,f]),re=z(function(){if(!f)return 0;for(var t=0,e=n[1]+1;e<=v;)t+=a[e]||0,e+=1;return t},[v,a,n,f]),U=n[0]*i,ne=Math.min((n[1]+1)*i,u.length)-1,B=[];if(Q){var k=R.createElement(N,{key:"above",ref:P,flex:!1,height:Q+"px"});E&&(k=R.cloneElement(E(k),{key:"above"})),B.push(k)}if(u.slice(U,ne+1).forEach(function(t,e){var r=U+e,l=T(t,r);B.push(l)}),f||n[1]<v||y){var C=R.createElement(N,{key:"below",ref:!E&&h||void 0,flex:!1,height:(re||0)+"px"});if(E){var W=E(C);C=R.cloneElement(W,{key:"below",ref:function(e){h.current=e;var r=W.ref;typeof r=="function"?r(e):r!==null&&(r.current=e)}})}B.push(C)}return B};ue.propTypes=ce;export{ue as I};
